title: 数据库学习笔记1
tags:
  - 数据库
  - 面试总结
id: 55
categories:
  - 数据库
date: 2015-03-23 11:32:54
---

显示当前服务器版本    SELECT VERSION();

显示当前日期时间    SELECT NOW();

显示当前用户        SELECT USER();

<!--more-->

MySQL语句的规范：1.关键字与函数名称全部大写；2.数据库名称，表名称，字段名称全部小写；3SQL语句必须以分好结尾

创建数据库

CREATE {DATABASE | SCHEMA } [IF NOT EXISTS] db_name [DEFAULT] CHARACTER SET[=]  charset_name

查看当前服务器下的数据库列表

SHOW {DATABASES | SCHEMAS} [ LIKE 'pattern' | where expr]

修改数据库

ALTER {DATABASE |SCHEMA} [db_name] [DEFAULT] CHARSET SET [=] charset_name

删除数据库

DROP {DATABASE| SCHEMA} [IF EXISTS] db_name

使用数据库

USE databasename

创建数据表

CREATE TABLE [IF NOT EXISTS] table_name(

column_name data_type,

...

)

查看数据表列表

SHOW TABLES [FROM db_name] [LIKE 'pattern' | WHERE expr]

查看数据表结构

SHOW COLUMNS FROM tbl_name

插入记录

INSERT [INTO] tbl_name [(colu_name,...)] VALUES(val,....)

记录查找

SELECT expr,...  FROM tbl_name

空与非空

NULL   字段值可以为空  NOT NULL  字段值禁止为空

AUTO_INCREMENT

自动编号，且必须与主键组合使用，默认情况下，起始值为1，每次增量为1

PRIMARY KEY

主键约束，每张表只能存在一个主键，主键保证记录的唯一性，主键自动为NOT NULL

AUTO_INCREMENT必须和PRIMARY KEY一起使用，而primary key不一定和auto_increment一起使用。

UNIQUE KEY

唯一约束，唯一约束可以保证记录的唯一性，唯一约束的字段可以为空值NULL,每张表可以存在多个唯一约束

简单的说，primary key = unique +  not null

DEFAULT

默认值

当插入记录时，如果没有明确为字段复制，则自动赋予默认值

约束

1.约束保证数据的完整性和一致性，2约束分为表级约束和列级约束，3约束类型包括：NOT NULL(非空约束),PRIMARY KEY(主键约束),UNIQUE KEY(唯一约束),DEFAULT(默认约束),FOREIGN KEY(外键约束)

外键约束 FOREIGN KEY

保持数据一致性，完整性；实现一对一或一对多关系，示例:

CREATE TABLE `provinces`(

id smallint unsigned not null auto_increment,

pname varchar(20) not null;

primary key(id)

);

CREATE TABLE users(

id smallint unsigned primary key auto_increment,

username varchar(10) not null,

pid smallint unsigned,

foreign key (pid)  references provinces (id)

);

子表 users,父表provinces

外键约束的要求

1父表和子表必须使用相同的存储引擎，而且禁止使用临时表。

2数据表的存储引擎只能是InnoDB

3外键列和参考列必须具有相似的数据烈性，其中数字的长度或者是否有符号位必须相同；而字符的长度可以不同。

4外键列和参考列必须创建索引。如果外键列不存在索引的话，mysql将自动创建索引

外键约束参考操作

1.cascade从父表删除或更新且自动删除或更新子表中的匹配行

2.set null:从父表删除或更新行，并设置子表中的外键列为NULL，如果使用此选项，必须保证子表列没有指定not null

3.restrict拒绝对父表的删除或更新操作

4.not action标准sql关键字，在mysql中与restrict相同

修改数据表

添加单列alter table tbl_name add [column] col_name colnumn_definition [first |after col_name]

添加多列   alter table tbl_name add [column] (col_name column_definition,...)

删除列  alter table tbl_name drop [column] col_name

添加主键约束   alter table tbl_name add[constraint [symbol]] primary key [index_type](index_col_name,....)