title: 数据库学习笔记2
tags:
  - 数据库
  - 面试总结
id: 58
categories:
  - 数据库
date: 2015-03-23 11:34:10
---

插入数据三种方式，INSERT;   INSERT SET  ;  INSERT SELECT
<!--more-->

Update

update [] [] table_reference set col_name={}.....[where where_condition]

如果省略条件，则更新所有数据

Delete
删除记录（单表删除）
DELETE FROM tbl_name [where where_condition]

SELECT
查找记录
SELECT  select_expr [,select_expr....]
[
FROM table_references
[WHERE  where_condition]
[GROUP BY {col_name|position} [asc|desc]]
[HAVING where_condition]
[ORDER BY {col_name |expr |position} [ASC|DESC]]
[LIMIT {[offset,] row_count | row_count OFFSET}]
]

where条件表达式，对记录进行过滤，如果没有指定where字句，则显示所有记录，在where表达式中，可以使用mysql支持的函数或运算符。
group by查询结构分组 [group by {col_name|position} [ASC|DESC],...]
having 分组   [having where_condition]
order by  对查询结果进行排序 [order by {col_name |expr |position}[asc|desc]]
limit 限制查询结构返回的数量 [limit {[offset,] row_count|row_count OFFSET offset}]

子查询
子查询指嵌套在查询内部，且必须始终出现在圆括号内。子查询可以包含多个关键字或条件，如DISTINCT,GROUP BY,ORDER BY ,LIMIT,函数等。子查询的外层查询可以是：select,insert,update,set 或do
子查询可以返回标量，一行，一列或子查询

使用比较运算符的子查询=,&gt;,&lt;,&gt;=,&lt;=,&lt;&gt;,!=,&lt;=&gt;语法结构operand comparision_operator subquery
SELECT AVG(goods_prices) from tbd_goods;
select round(avg(goods_prices),2) from tbd_goods
select goods_id,goods_name,goods_price from tbd_goods where goods_price&gt;=5636.36
select goods_id,goods_name,goods_price from tbd_goods where goods_price&gt;=(select round(avg(goods_price),2) from tbd_goods);
select goods_price from tbd_name from tbd_goods from goods_cate='超极本'
select * from tbd_goods where goods_price&gt;=(select goods_price from tbd_goods where goods_cat='超极本')   错误

用any,some,或all修饰的比较运算符(如果子查询返回多个结果时使用)

operand comparison_operator any(subquery)
operand comparison_operator some(subquery)
operand comparison_operator all(subquery)

使用[not] in的子查询
语法结构operand comparison_operator [not] in (subquery)
= any 运算符与In 等效
!=All或&lt;&gt; All运算符和NOT IN等效

使用[not] exists的子查询
如果子查询返回任何行，exists将返回true，否则为false

Insert select

insert tdb_goods_cates(cat_name) select good_cat from tdb_goods group by goods_cate

多表更新
update tablereference set col_name={}[....] [where ]

多表链接
table_reference{[innder|cross] join |{left|right}[outer] join} table_reference on conditional_expr

update tdb_goods inner join tbd_goods_cates on goods_cat set goods_cate=cat_id;

create ....select

创建数据表同时将查询结构写入到数据表
create table [if not exists] tbl_name [(create_definition,...)] select_statement

链接
mysql   在select语句中，多表更新，多表删除语句中支持join操作。

数据表参考
table_reference
tbl_name[[AS] alias]| table)subquery [as] alias
数据表可以使用tbl_name as alias_name或者tbl_name alias_name赋予别名
table_subquery可以作为子查询使用在from字句中，这样的子查询必须为其赋予别名

连接类型
INNER JOIN内连接
在MySQL中，JOIN,CROSS JOIN与inner join是等价的
left [outer] join左外连接
right [outer] join右外连接
连接条件：使用On关键字来设定连接条件，也可以使用where来代替。通常使用on关键字来设定连接条件，使用where关键字进行结果集记录的过滤

内连接：显示左表及右表符合连接条件的记录
left join: 左表的全部和右表中符合条件的
right join:右表的全部和左表中符合条件的