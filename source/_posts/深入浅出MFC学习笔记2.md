title: 深入浅出MFC(李久进)学习笔记2
tags:
  - c++
  - GUI
  - MFC
id: 49
categories:
  - GUI
date: 2015-03-13 23:45:32
---

使用MFC框架编程时，消息发送和处理的本质也是如上所述。但是有一点需要强调的是，所有的MFC窗口都使用同一个窗口过程，程序员不必去设计和实现自己的窗口过程，而是通过MFC提供的一套消息映射机制来处理消息，因此MFC简化了程序员的编程时处理消息的复杂性。<!--more-->
所谓消息映射，简单的讲，就是让程序员指定要某个MFC类（有消息处理能力的类）处理某个消息。在处理消息的类中添加一些有关消息映射的内容和处理消息的成员函数，程序员完成消息处理函数，实现所希望的消息处理能力。
根据处理函数和处理过程的不同，MFC主要处理三类消息 windows消息，前缀以WM开头，WM_COMMAND例外。控制通知消息，是控制窗口送给父窗口的WM_COMMAND通知消息。WIN32 使用新的WM_NOTIFY来处理复杂的通知消息，命令消息，这是来自菜单，工具条按钮，加速键等用户接口对象的WM_COMMAND通知消息，属于应用程序自定义的消息。

MFC消息映射的实现方法：
在类的定义（头文件）里，它增加了消息处理函数声明，并添加一行声明消息映射的宏DECLARE_MESSAGE_MAP，在类的实现文件中，实现消息处理函数，并使用IMPLEMENT_MESSAGE_MAP宏实现消息映射。头文件里是消息映射和消息处理函数的声明，实现文件里是消息映射的实现和消息处理函数的实现。

常用的消息映射用：用于Windows消息的宏，前缀为ON_WM_；用于命令消息的宏ON_COMMAND，除了单条命令消息的映射，还有把一定范围的命令消息映射到一个消息处理函数的映射宏ON_COMMAND_RANGE；用于控制通知消息的宏，这类宏可能带有三个参数，如ON_CONTROL,就需要指定控制窗口ID，通知码和消息处理函数，也可能带有两个参数，如具体处理特定消息通知的宏；还有一类宏处理通知类ON_NOTIFY,类似于ON_CONTROL;用于用户界面接口状态更新的ON_UPDATE_COMMAND_UI;用于其他消息的宏例如用于用户定义消息的ON_MESSAGE